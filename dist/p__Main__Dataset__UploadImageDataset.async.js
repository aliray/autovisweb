(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{qb25:function(e,t,a){"use strict";a.r(t);a("T2oS");var s,n,l,r=a("W9HT"),i=(a("DZo9"),a("8z0m")),o=a("jehZ"),c=a.n(o),p=(a("+L6B"),a("2/Rp")),d=(a("/zsF"),a("PArb")),u=(a("Pwec"),a("CtXQ")),f=a("gWZ8"),m=a.n(f),h=(a("miYZ"),a("tsqr")),y=a("2Taf"),v=a.n(y),b=a("vZ4D"),E=a.n(b),g=a("l4Ni"),_=a.n(g),w=a("ujKo"),L=a.n(w),C=a("MhPg"),D=a.n(C),z=(a("y8nQ"),a("Vl3Y")),S=a("q1tI"),R=a.n(S),k=a("MuoO"),x=a("3a4m"),A=a.n(x),M=a("4AEC"),N=a.n(M);function Z(e){return function(){var t,a=L()(e);if(j()){var s=L()(this).constructor;t=Reflect.construct(a,arguments,s)}else t=a.apply(this,arguments);return _()(this,t)}}function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var q=z["a"].Item,P=(s=Object(k["connect"])(function(e){return{success:e.ds.success,error:e.ds.error}}),s((l=function(e){D()(a,e);var t=Z(a);function a(){var e;v()(this,a);for(var s=arguments.length,n=new Array(s),l=0;l<s;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n)),e.state={fileList:[],dataset_id:"",dataset_name:"",dataset_type:"",label:""},e.beforeUpload=function(t){var a=e.state.fileList,s="image/jpeg"===t.type;if(!s)return h["a"].error("\u8bf7\u4e0a\u4f20\u56fe\u7247"),!1;var n=t.size/1024/1024<10;return console.log(t.size),n?(console.log(t),e.setState({fileList:[].concat(m()(a),[t])}),!1):(h["a"].error("\u4e0a\u4f20\u7684z\u56fe\u7247\u4e0d\u80fd\u5927\u4e8e10M!"),!1)},e.saveDataset=function(){var t=e.state,a=t.dataset_id,s=t.dataset_type,n=t.fileList,l=t.label,r=e.props,i=r.dispatch;r.form;console.log(n),i({type:"ds/uploadImageDataset",payload:{dataset_id:a,dataset_type:s,fileList:n,label:l}}).then(function(){var t=e.props,n=t.success,r=t.error;n?A.a.push("/main/work/opr/"+s+"/iv",{dataset_id:a,dataset_name:dataset_name,label:l}):console.log(r)})},e}return E()(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.oprKey,a=this.props.location.state,s=a.dataset_id,n=a.dataset_name,l=a.label;this.setState({dataset_id:s,dataset_name:n,dataset_type:t,label:l}),setTimeout(function(t){e.setState({spinLoading:!1})},300)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,s=(a.dataset_id,a.dataset_name),n=a.fileList,l=a.label,o={labelCol:{span:3},wrapperCol:{span:6}},f=function(t){e.setState({fileList:t})},m=function(){e.setState({fileList:[]})},y={name:"images",action:"/ds/upload/image",headers:{accessControlAllowOrigin:"",accessControlAllowMethods:"*",accessControlAllowHeaders:"x-requested-with,content-type",authorization:"authorization-text"},data:{dataset_id:this.state.dataset_id,dataset_type:this.state.dataset_type,label:this.state.label},fileList:this.state.fileList,onChange:function(e){if(f(e.fileList),"done"===e.file.status){var t=e.file.response.success;0==t?(h["a"].success("\u4fdd\u5b58\u6570\u636e\u96c6\u6210\u529f"),closeView()):h["a"].error(e.file.response.error)}else"error"===e.file.status&&h["a"].error("".concat(e.fileList[0].name," file upload failed."))},onRemove:function(e){m()}},v=R.a.createElement(u["a"],{type:"loading",style:{fontSize:24},spin:!0});return R.a.createElement("div",null,R.a.createElement(r["a"],{spinning:this.state.spinLoading,indicator:v},R.a.createElement("div",{className:N.a.menuDesc},R.a.createElement("div",{className:N.a.menuDescLeft},"\u6570\u636e\u96c6",""!=s&&R.a.createElement("span",null,"> ",this.state.dataset_name),""!=l&&R.a.createElement("span",null,"> ",this.state.label)),R.a.createElement("div",{className:N.a.menuDescRight},R.a.createElement("a",null)),R.a.createElement(d["a"],null)),R.a.createElement("div",{className:N.a.detailArea},R.a.createElement(z["a"],o,R.a.createElement(q,{label:"\u6570\u636e\u96c6\u540d\u79f0"},R.a.createElement("div",{style:{fontSize:"12px"}},s)),R.a.createElement(q,{label:"\u6807\u7b7e"},R.a.createElement("div",{style:{fontSize:"12px"}},l)),R.a.createElement(q,{label:"\u4e0a\u4f20\u56fe\u7247"},t("zipfile")(R.a.createElement(i["a"],c()({multiple:!0},y,{beforeUpload:this.beforeUpload}),R.a.createElement(p["a"],{style:{width:"235px"}},R.a.createElement(u["a"],{type:"upload"}),"Upload")))),R.a.createElement(q,{wrapperCol:{xs:{span:24,offset:0},sm:{span:o.wrapperCol.span,offset:o.labelCol.span}}},0==n.length?R.a.createElement(p["a"],{type:"primary",disabled:!0,onClick:this.saveDataset},"\u786e\u8ba4\u5e76\u8fd4\u56de"):R.a.createElement(p["a"],{type:"primary",onClick:this.saveDataset},"\u786e\u8ba4\u5e76\u8fd4\u56de"))))))}}]),a}(S["Component"]),n=l))||n);t["default"]=z["a"].create()(P)}}]);